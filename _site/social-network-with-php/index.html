<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Defining Defination - PHP로 SNS만들기에 대한 현실적인 팁과 고찰</title>
        <meta property="fb:admins" content="openhiun" />
        <meta property="fb:app_id" content="533004283446886"/>
        <meta property="og:title" content="PHP로 SNS만들기에 대한 현실적인 팁과 고찰" />
        <meta property="og:url" content="/social-network-with-php" />
        
        <meta name="description" content="Startup, Geek, Opensource.." />
        


        <!-- Favicons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.gravatar.com/avatar/88c94e86ee17d23e06907361e5533e99.jpg?s=144">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.gravatar.com/avatar/88c94e86ee17d23e06907361e5533e99.jpg?s=114">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.gravatar.com/avatar/88c94e86ee17d23e06907361e5533e99.jpg?s=72">
                <link rel="apple-touch-icon-precomposed" href="http://www.gravatar.com/avatar/88c94e86ee17d23e06907361e5533e99.jpg?s=57">
                               <link rel="shortcut icon" href="/images/favicon.ico">
                                       <link href='http://www.openhiun.com/social-network-with-php' rel='canonical'/>
        <script src="/js/parallax.js"></script>
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" type="text/css" href="/css/default.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/custom.css">

        <!-- Analytics -->
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38527094-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    </head>
    <body>
      <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=533004283446886";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
      </script>

       <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Defining Definition</a></h1>
             <div class="subtitle">
              Startup, Geek, Opensource..  
             </div>
          </div><!--header--> 
            <div class="header-border">
            <br />
          </div>
          
        
        
         
         <div id="main">
        
        

          <h2>PHP로 SNS만들기에 대한 현실적인 팁과 고찰</h2>
<p class="meta">02 Dec 2013</p>

<div class="post">
<p><center><img src="http://farm4.staticflickr.com/3800/11155396466_b2fbdd6ed6_o.png" width="350" alt="the-social-network-logo"></center></p>

<p>한때 SNS가 많은 각광을 받았었다. 11년은 그 정점일것이다. 영화 소셜네트워크가 나오면서 페이스북과 트위터가 많은 인기를 얻었으니..
요즘 열기는 그때만 못하지만 난 여전히 SNS에 많은 가치를 두고 있다. 그 이유는 사람과 사람을 연결하는것 그것이 가장 가치있고 또한 재미있고 흥분되는 일이기 때문인것 같다.
그런점에서 형태는 개방적, 폐쇠적으로 공간은 온라인, 오프라인, 온오프라인으로 많이 바뀌겠지만, 앞으로도 우리의 원초적 본능인 다른사람과 만나고 싶고
소통하고 싶다느것. 그것을 채워주기 위해 오랫동안 남아있을 카테고리인것 같다.</p>

<p>현실적으로 우리가 흔히 접할수 있는 언어인 &#39;PHP로 SNS만들기&#39;로 구글링을 하면 워드프레스를 이용한 방법말고는 나오지 않는다.
이 글에서는 1년전의 나처럼 막연하게 SNS를 만들고 싶은 마음을 가지고 있는 뉴비들을 대상으로 기본적인 기능 구현에대해 적어보려 한다.</p>

<p><br />
<strong>1.인프라</strong></p>

<p><center><img src="http://farm4.staticflickr.com/3719/11155998445_9fbd296dd9_n.jpg" width="120" alt="eb"></center></p>

<p>상용 서비스든 베타 서비스든 &#39;서비스&#39;라는걸 가동시키기 위해서 장비와 전력등이 필요하다. 가장 쉬운 방법은 호스팅을 이용하는 것인데
나는 막 개발해보고픈 PHP입문자라면 <a href="http://aws.amazon.com/ko/">아마존 웹 서비스</a>에 가입해서 <a href="http://aws.amazon.com/ko/elasticbeanstalk/">Elastic Beanstalk</a>(이하 eb)을 사용해 볼것을 권한다.</p>

<p>PHP로 개발을 처음 하는 사람은 윈도우에서는 WAMP나 APM_SETUP등을 사용해서 쉽게 애플리케이션 구동환경을 만들겠지만
상용서비스시에는 비용문제등으로 리눅스 서버를 사용해야 하는데 이 경우 PHP와 MySQL그리고 그것을 뒷받침해주는 기타 패키지등을
설치해야한다. </p>

<p>지금 미친듯이 실현하고 싶은 아이디어가 있다면 리눅스와 SSL에 대한 삽질은 나중으로 미루어도 된다. eb는 PHP와 MySQL같은 공통 요소를 최적화시켜 설치해놓은 서버이다.
<strong>eb를 선택한다음 당신이 할것은 PHP를 이용한 애플리케이션 개발 뿐이다.</strong></p>

<p><br />
<strong>2.데이터베이스</strong></p>

<p><center><img src="http://farm6.staticflickr.com/5535/11156096956_b352427c02_o.png" width="170" height="115" alt="mysql"></center></p>

<p>프로그래밍 언어로는 PHP를 사용할 것인데, PHP는 eb에 기본 설치되어 있다. 상용서비스 뿐만 아니라 초기서비스에서도 중요한것은
바로 <strong>철저히 분리된 시스템</strong>이다. 대부분의 스타트업 서비스는 웹서버 + 애플리케이션 서버 - DB서버로 구성되어 있다. 웹서버와 애플리케이션 서버는 분리 통합이
비교적 문제가 아니나, 우리가 셀프 호스팅 할때처럼 데이터베이스를 같은 서버에 둘필요는 없다. 리소스 낭비이기 때문에, 그래서 아마존 웹 서비스의 <a href="http://aws.amazon.com/ko/rds/">RDS</a>를 사용하면 된다. 간단하게.</p>

<p><br />
<strong>2-1.MySQL vs NoSQL(mongodb, HBase, Cassandra and Hadoop + etc)</strong></p>

<p><center><img src="http://farm6.staticflickr.com/5548/11156503776_61e1470667_n.jpg" width="320" height="94" alt="mongodb"></center></p>

<p>제발 MySQL로 가주기 바란다. 이제 시작한 서비스는 99%의 불확실성에 쌓여있다. 메시징은 HBase, 데이터분석은 Hadoop이 특화된 데이터베이스라고 하나
일반적으로 빠르게 시작해서 니즈를 검증하려면 또 빠른 상용서비스를 만드려면 시작하려면 그냥 MySQL로 가는것이 좋다. 빠른 시도가 실패의 비용을 줄이고, 개발의 복잡성도 줄이기 때문에 나는 처음에는 <strong>닥치고 MySQL을 사용하라고 권하고 싶다.</strong></p>

<p><br />
<strong>3.회원가입</strong></p>

<p><center><img src="http://farm8.staticflickr.com/7291/11156407464_c30c0460fc.jpg" width="550" alt="fb"></center></p>

<p>간단한 과정을 설명하자면 
1. 사용자가 폼에서 입력한 이름, 성, 이메일, 비밀번호를 post방식으로 전송한다.
2. 
2. 처리하는 PHP스크립트에서 PHP의<code>isset</code>과 <code>!empty</code>함수를 사용해 post방식으로 전송된 값이 설정되 있는지, 비어있지 않은지 
검사한다. (이때는 다중 if if if를 사용해서 하나하나 값을 검사하면 될것 같다.)</p>

<p>3.값이 유효하다면 비밀번호를 bcrypt등으로 암호화해서 다른 정보화 같이 MySQL에 넣고 이메일을 가져와서 로그인을 시도한다.</p>

<p>4.로그인 방법은 이메일과 암호화된 비밀번호를 mysql에서 쿼리문으로 <code>SELECT</code>하고 <code>mysqli_num_query</code>로 이메일과 비밀번호가
매칭되는 값이 있는지 확인한다.</p>

<p>5.만약 1이 나온다면 <code>session_start();</code>함수를 통해 세션을 발급하고 <code>header</code>함수로 실제 퍼스널라이징된 SNS페이지로 이동시킨다.</p>

<p>(BTW나는 여기까지 파는대 2달 걸렸다.)</p>

<p><br />
<strong>4.피드 만들기</strong></p>

<p><center><img src="http://farm4.staticflickr.com/3667/11156310723_d21ce3b5e8_o.jpg" width="550" alt="nf"></center></p>

<p>항상 궁금했다. 어떻게 페이스북은 같은 피드를 아니, 거의 모든 서비스가 어떻게 UI와 피드를 만드는지. 답은 간단했다. 
우리가 프로그래밍 시간에 배운 <code>while</code>문을 PHP에서 MySQL에서 데이터를 가져올때 사용하는 <code>mysqli_fetch_array</code>와 함께 사용해서 <strong>일치하는 열의 데터를 모두 가져온뒤, 한열씩 조건에 맞게 반복<code>while</code>하면 된다.</strong> 이런식으로 블로그 글,
트위터와 페이스북 피드도 작동한다. 물론 추가되는 조건이나 알고리즘은 다르지만, 근본은 같다.</p>

<p>예를 들어보자. 나는 이름과 시간 그리고 텍스트가 있는 피드를 가져올것이다. 아래와 같은 PHP코드로 말이다.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">//some code..</span>

<span class="nv">$feed_query</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="s2">&quot;SELECT * FROM blog ORDER BY time DESC&quot;</span><span class="p">);</span>
  <span class="k">while</span><span class="p">(</span><span class="nv">$feed_array</span> <span class="o">=</span> <span class="nx">mysqli_fetch_array</span><span class="p">(</span><span class="nv">$feed_query</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$firstname</span> <span class="o">=</span> <span class="nv">$feed_array</span><span class="p">[</span><span class="s1">&#39;firstname&#39;</span><span class="p">];</span>
    <span class="nv">$lastname</span> <span class="o">=</span> <span class="nv">$feed_array</span><span class="p">[</span><span class="s1">&#39;lastname&#39;</span><span class="p">];</span>
    <span class="nv">$time</span> <span class="o">=</span> <span class="nv">$feed_array</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">];</span>
    <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$feed_array</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s">&lt;&lt;&lt;POST</span>
<span class="s">    &quot;&lt;h3&gt;&quot; . $firstname . &quot;&amp;nbsp;&quot; . $lastname . &quot;&lt;/h3&gt;&lt;br /&gt;&quot;</span>
<span class="s">    &quot;&lt;h5&gt;&quot; . $time . &quot;&lt;/h5&gt;&lt;br /&gt;&quot;</span>
<span class="s">    &quot;&lt;h4&gt;&quot; . $text . &quot;&lt;/h4&gt;&lt;br /&gt;&quot;</span>
<span class="s">    &lt;hr&gt;</span>
<span class="s">POST;</span>
  <span class="p">}</span>

<span class="c1">//some code..  </span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>

<p>매우 간단하다. <code>feed_query</code>변수로 쿼리문을 통해 데이터를 불러오고, <code>mysqli_fetch_array</code>함수를 <code>while</code>함수 안에 
넣어서 쿼리를 통해 가져온 모든 결과값을 반복해서 출력한다. <code>mysqli_fetch_array</code>는 가져온 값을 배열에 넣는 함수인데 
아래처럼 각각 피드 내용의 변수를 만들어서 배열에 있는 데이터를 입력하고 <code>echo &lt;&lt;&lt;POST</code>와 <code>POST;</code>사이에 넣어서 
출력한다. <code>echo</code>는 PHP에서 HTML을 출력할수 있게 만들어 주는 내장함수이다.</p>

<p><br />
<strong>에필로그</strong></p>

<p>당신이 어떤 서비스를 개발하든 대부분 아마준 웹 서비스의 1년 무료 체험인 프리티어 상에서 서비르르 운영해보고 
반응을 살필수 있을것이다. 몇달전 내가 PHP에 깊게 파고들기 시작할 무렵, 나는 이런 생각이 들었다. 세상이 모든것을 지원해준다. 나는 단지 아이디어와 산념 그리고 코딩만 하면 된다. 지식은 인터넷에 널렸고, 도구는 넘쳐난다. 누군가 말한거처럼 <strong>지금이 우주역사상 가장 스타트업하기, 아니 자신의 아이디어를 실행시켜보기 가장 좋은 때라고.</strong> 코드를 작성한다느것은 <a href="https://www.dropbox.com">드랍박스</a>의 창업자 드류 휴스턴의 말처럼 신의 힘(Super Power)을 가지는 거라고.</p>

<p>항상 기억하는 문구가 있다.</p>

<p>그루폰이 허름한 워드프레스 웹사이트와 수제 pdf쿠폰으로, 핀터레스트가 블로그용으로 쓰이는 PHP기반으로 시작됬다는 이야기를 들으며, 시작은 허름할지라도 빨리 아이디어를 구현하고 실현해나가는것이 중요하다고 생각한다. <a href="http://opentutorials.org/course/62">지금 당장 시작해보자!</a></p>


</div>
<br />
<div class="sharer-border">
          </div> 
<!--facebook like button-->
<div class="fb-like" data-width="100" data-layout="button_count" data-show-faces="true" data-send="false"></div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<!--twitter tweet button-->
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!--google plus +1 button-->
<!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-size="medium"></div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<!--linkedin share button-->
<script src="//platform.linkedin.com/in.js" type="text/javascript">
 lang: en_US
</script>
<script type="IN/Share" data-counter="right"></script>
<br />
<br />
<!--disqus comments-->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'openhiunblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





         <div class="footer">
            <div class="footer-text">
             Generated by <a href="http://jekyllrb.com">Jekyll</a> and Proudly Powered by <a href="http://pages.github.com">Github</a>
           </div><!--footer text-->
         </div><!--footer-->
         <br />
         <br />


             </div><!--main-->
         
           <div id="gap">
           </div>
           <div id="sidebar">
            <br />
              <img src="/images/openhiun.jpg" width="180px">
              <br /><br />
Contact Info
<div class="header-border">
          </div>
          <b>Hiun Kim</b><br />
          openhiun@gmail.com<br />
          Hacker at <a href="https://www.springvil.com">Springvil</a><br />
<a href="/about">About Me</a> / <a href="http://www.linkedin.com/in/openhiun">Linkedin</a>
          <br /><br />
          Twitter
          <div class="header-border">
          </div>
          <a href="https://twitter.com/openhiun" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @openhiun</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br /><br />
Syndication
<div class="header-border">
          </div>
   <img src="/images/feed.gif"> Subscribe this blog's<br />
   <a href="/atom.xml">atom feed</a> or <a href="/feed.xml">rss feed</a>
   <br /><br />
Personal Projects
<div class="header-border">
          </div>
   <a href="/glee/">Glee</a> - env variable editor.
<br /><br />
Policy
<div class="header-border">
          </div>

  <center>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Every content of this blog</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</center>
<br />
<br />
<img id='chrome' src='/images/chrome.png' style='position:absolute' width="200px" />
         
          </div><!--sidebar-->
      </div><!--site-->
    </body>
</html>
